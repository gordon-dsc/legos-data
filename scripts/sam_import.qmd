```{r}
library(httr2)
library(tidyverse)
library(rvest)
library(tibble)
library(readr)
library(string)
```

**WEB SCRAPING - 121 movies**

```{r}
#Web Scrape - franchise - GOOD

#Get the website to scrape
title <- read_html("https://en.wikipedia.org/wiki/List_of_highest-grossing_media_franchises")|>
  
#Get data from website
html_nodes("td:nth-child(1)")|>
  
#Print data out neatly
html_text2() -> franchise_title

#clean the data
title <- data.frame(title)

#Remove unwanted empty rows
title <- title |>
filter(title != "") 

#Remove unwanted rows at the end of the column
title <- title[-122, ]
title <-tibble(title)
```

```{r}
#Web Scrape - year of inception - GOOD 

#Get the website to scrape
year <- read_html("https://en.wikipedia.org/wiki/List_of_highest-grossing_media_franchises")|> 

#Get data from website
html_nodes("td:nth-child(2)")|>
html_text2() -> year_of_inception

#Convert to a dataframe
year_of_inception_df <- data.frame(year_of_inception)

#remove unwanted rows(clean the data)
year_of_inception_df <- year_of_inception_df[1:121,]
year_1 <-tibble(year_of_inception_df)

#Remove unwanted characters
year_1|>
  mutate(year = parse_number(year_of_inception_df))|>
  select(year) -> release_year
```

```{r}
#Web Scrape - Total Revenue - GOOD

#Get the website to scrape
read_html("https://en.wikipedia.org/wiki/List_of_highest-grossing_media_franchises")|>

#Get data from website  
html_elements("td:nth-child(3)")|>

#print out the data neatly
html_text2() -> total_revenue

#convert to a dataframe
total_revenue_df <- data.frame(total_revenue)

#Clean the data
total_revenue_df|>
  mutate(revenue = parse_number(total_revenue))|>
  select(revenue) -> movie_revenue
```

```{r}
#Web Scraping - Original Medium - GOOD
read_html("https://en.wikipedia.org/wiki/List_of_highest-grossing_media_franchises")|>

#Get the data
html_elements("td:nth-child(5)")|>
  
#Print out data neatly
html_text2() -> original_medium

#convert to a dataframe
original_medium_df <- data.frame(original_medium)

#creat a tibble of all 4 columns
tibble(title,release_year, original_medium_df, movie_revenue) -> movies

```
